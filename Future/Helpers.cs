using System.IO;
using System.Reflection;
using System.Security.Policy;

// These functions are for future updates
// They aren't called in main program

namespace CustomLoader
{
    public static class Helpers
    {
        private static byte[] GetAssemblyBytes(Assembly assembly)
        {
            var hash = new Hash(assembly);

            var assemblyAsArray = (byte[])hash.GetType()
                .GetMethod("GetRawData", BindingFlags.Instance | BindingFlags.NonPublic)
                .Invoke(hash, new object[0]);

            return assemblyAsArray;
        }
        public static void WriteAssemblyFile(Assembly assembly, string path)
        {
            byte[] assemblyByteArray = GetAssemblyBytes(assembly);
            WriteBytesFile(assemblyByteArray, path);
        }
        private static void WriteBytesFile(byte[] byteArray, string path)
        {
            File.WriteAllBytes(path, byteArray);
        }
    }
}
